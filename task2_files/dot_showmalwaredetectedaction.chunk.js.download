(window.odspNextWebpackJsonp=window.odspNextWebpackJsonp||[]).push([["dot_showmalwaredetectedaction"],{2419:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(1278),s=n(1259),o=n(1260),u=n(17),a=n(1258),f=n(30),l=n(1264),c=n(151);Object(c.n)([{rawString:".od-MalwareDetected-dialog-header{color:"},{theme:"errorText",defaultValue:"#a4262c"},{rawString:";font-size:21px;margin-bottom:15px}"}]);var h=n(1243),p=n(21),d=n(2020),v='<a href="https://go.microsoft.com/fwlink/?linkid=862871" target="_blank">'+d.e.malwareDetectedMessageLearnMore+"</a>",m=(function(e){Object(r.__extends)(t,e);function t(t){var n=e.call(this,t)||this;n.allowInfectedDownload=t.allowInfectedDownload;n.malwareDetectedIconUrl=window.require.toUrl("odsp-media/images/atp/malware_icon_168x168.svg");n.malwareDetectedMessageHeader=d.e.malwareDetectedDialogHeader;n.malwareDetectedMessage=p.format(d.e.malwareDetectedMessage,v);n.malwareDetectedAllowDownloadMessage=p.format(d.e.malwareDetectedAllowDownloadMessage,v);return n}return t})(h.t),g=n(1245).e({tagName:"od-malwareDetected",template:'<div class="od-MalwareDetected-dialog-content"><div class="od-MalwareDetected-dialog-header" data-bind="text:malwareDetectedMessageHeader"></div><div>\x3c!--ko if:allowInfectedDownload--\x3e<span data-bind="html:malwareDetectedAllowDownloadMessage"></span>\x3c!--/ko--\x3e\x3c!--ko ifnot:allowInfectedDownload--\x3e<span data-bind="html:malwareDetectedMessage"></span>\x3c!--/ko--\x3e</div></div>',viewModel:m}),y=n(141),b=n(1283),w=n(34),E=n(104),S=(function(e){Object(r.__extends)(t,e);function t(t){var n=e.call(this,t)||this;n.name="malwareDetected";n.dialogProvider=n.resources.consume(l.e);n._itemSelectionHelper=new(n.child(s.e))({overrideItem:t.item});n._responsiveUI=n.resources.consume(b.t);n._pageContext=n.resources.consume(w.h);n._navigation=n.resources.consume(E.e);n._itemUrlHelper=n.resources.consume(y.n);return n}t.prototype.onIsAvailable=function(){var e=this._itemSelectionHelper.firstItem();return e&&e.lifeCycleStatus&&e.lifeCycleStatus.isMalwareDetected};t.prototype.onExecute=function(e,t){this._getMalwareDetectedDialog();return u.n.wrap({resultType:f.e.Failure})};t.prototype._getMalwareDetectedDialog=function(){var e=this,t=this._pageContext.allowInfectedDownload,n=[];t&&n.push({name:a.e.Download,execute:function(){e._downloadInfectedItemViaClassic();return u.n.wrap(2)},isAvailable:this.observables.create(!0),icon:new o.e("Download"),isDefault:!0});n.push({name:t?a.e.declineInfectedDownload:a.e.ok,execute:function(){return u.n.wrap(2)},isAvailable:this.observables.create(!0),icon:new o.e("Cancel"),isDefault:!0});this.dialogProvider.requestDialog({component:{name:g.tagName,params:{allowInfectedDownload:t}},size:"Medium",actions:n,focusOnPrimaryAction:!0,isDismissable:!(this._responsiveUI.compareSize(this._responsiveUI.formFactorSize(),"Small")<=0)})};t.prototype._getItemClassicDownloadLink=function(){var e=this._itemSelectionHelper.firstItem();return this._itemUrlHelper.getItemUrlParts(e.key).fullItemUrl+"?avcmd=1"};t.prototype._downloadInfectedItemViaClassic=function(){var e=this._getItemClassicDownloadLink();e&&this._navigation.navigateTo({url:e,frameId:"_blank"})};return t})(i.e);t.default=S}}]);